<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gift EXP</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    body {background:#0d0d1f; color:#d0d0ff; font-family:sans-serif; margin:0; padding:0; overflow:hidden;}
    .top {background:#1a1a3a; padding:12px; display:flex; align-items:center; border-bottom:1px solid #333;}
    .avatar {width:50px; height:50px; border-radius:50%; border:2px solid #00aaff; margin-right:12px;}
    .name {font-size:1.3em; font-weight:bold;}
    .level {color:#00aaff; font-size:1em;}
    .balance {text-align:center; font-size:1.4em; margin:15px 0; color:#00aaff;}
    .recharge {background:#00aaff; color:white; border:none; padding:14px; font-size:1.3em; border-radius:12px; width:90%; margin:10px auto; display:block;}
    .ref-card {background:linear-gradient(#00aaff, #0077cc); margin:15px; padding:15px; border-radius:12px; text-align:center; color:white;}
    .ref-btn {background:#ffffff20; color:white; padding:12px; border:none; border-radius:20px; font-size:1.2em; width:100%; margin-top:10px;}
    .tabs {display:flex; justify-content:space-around; background:#111; padding:8px 0; position:fixed; bottom:0; left:0; right:0; border-top:1px solid #333;}
    .tab-btn {background:none; border:none; color:#aaa; font-size:1em; padding:8px; flex:1; text-align:center;}
    .tab-btn.active {color:#ffffff;}
    .content {padding:15px; padding-bottom:80px;}
    .bets {display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin:20px 0;}
    .bet-btn {background:#ff3366; color:white; border:none; padding:12px 24px; font-size:1.2em; border-radius:12px; cursor:pointer;}
    .bet-btn.active {background:#ffd700; color:#000;}
    .go-btn {background:#00ff88; color:#000; padding:16px; font-size:1.6em; border:none; border-radius:20px; width:90%; margin:20px auto; display:block; font-weight:bold;}
    #result {font-size:1.8em; text-align:center; margin:30px 0; min-height:60px;}
    .win {color:#00ffaa; animation:blink 1.2s infinite;}
    .lose {color:#ff6666;}

    /* –ö–æ–ª–µ—Å–æ –∞–Ω–∏–º–∞—Ü–∏–∏ */
    #wheel-container {position:relative; width:300px; height:300px; margin:30px auto; perspective:1000px;}
    #wheel {width:100%; height:100%; border-radius:50%; background:conic-gradient(
      #ff3366 0deg 60deg,
      #ffd700 60deg 120deg,
      #00ff88 120deg 180deg,
      #00aaff 180deg 240deg,
      #ff3366 240deg 300deg,
      #ffd700 300deg 360deg
    ); transform-style:preserve-3d; transition:transform 5s cubic-bezier(0.25, 0.1, 0.25, 1);}
    .segment {position:absolute; width:100%; height:100%; clip-path:polygon(50% 50%, 100% 0, 100% 100%);}
    .prize {position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); font-size:1.8em; pointer-events:none;}
    #pointer {position:absolute; top:-20px; left:50%; transform:translateX(-50%); width:0; height:0; border-left:20px solid transparent; border-right:20px solid transparent; border-bottom:40px solid #ffd700; z-index:10;}
  </style>
</head>
<body>
  <!-- ... (–ø—Ä–æ—Ñ–∏–ª—å, –±–∞–ª–∞–Ω—Å, —Ä–µ—Ñ–µ—Ä–∞–ª–∫–∞, –≤–∫–ª–∞–¥–∫–∏ - –æ—Å—Ç–∞–≤—å –∫–∞–∫ –±—ã–ª–æ) ... -->

  <div id="play" class="content">
    <div class="bets"> <!-- —Å—Ç–∞–≤–∫–∏ –∫–∞–∫ —Ä–∞–Ω—å—à–µ --> </div>
    <button class="go-btn" onclick="spinWheel()">–ú–Ω–µ –ø–æ–≤–µ–∑—ë—Ç, Go! <span id="bet-display">100</span> ‚òÖ</button>

    <div id="wheel-container">
      <div id="pointer"></div>
      <div id="wheel"></div>
    </div>

    <div id="result"></div>
  </div>

  <!-- –∞—É–¥–∏–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ -->
  <audio id="spin-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"></audio>
  <audio id="win-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-magical-coin-win-1939.mp3"></audio>

  <script>
    // ... (–æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥: –±–∞–ª–∞–Ω—Å, —Å—Ç–∞–≤–∫–∏, showTab –∏ —Ç.–¥. –æ—Å—Ç–∞–≤—å –∫–∞–∫ –±—ã–ª–æ) ...

    function spinWheel() {
      if (stars < currentBet) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ Stars!");

      stars -= currentBet;
      document.getElementById('result').innerHTML = '';
      const wheel = document.getElementById('wheel');
      const spinSound = document.getElementById('spin-sound');
      spinSound.play();

      // –°–ª—É—á–∞–π–Ω—ã–π —É–≥–æ–ª –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (360*5 + random 0-360)
      const extraSpins = 5 + Math.floor(Math.random() * 3);
      const randomAngle = Math.random() * 360;
      const finalAngle = 360 * extraSpins + randomAngle;

      wheel.style.transition = 'transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)';
      wheel.style.transform = `rotate(${finalAngle}deg)`;

      setTimeout(() => {
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—ã–∏–≥—Ä—ã—à –ø–æ —É–≥–ª—É (–ø—Ä–∏–º–µ—Ä–Ω–æ)
        const normalized = finalAngle % 360;
        let msg = 'Common Bear üß∏';
        let cls = 'lose';
        let winAmount = currentBet * 1.2; // –º–∏–Ω–∏–º—É–º +

        if (normalized < 60) { msg = 'Rare Rocket üöÄ'; cls = 'win'; winAmount = currentBet * 3; confetti(); }
        else if (normalized < 120) { msg = 'Epic Trophy üèÜ'; cls = 'win'; winAmount = currentBet * 2.5; confetti(); }
        else if (normalized < 180) { msg = 'Rose üåπ'; cls = 'win'; winAmount = currentBet * 1.8; }
        else if (normalized < 240) { msg = 'Crystal üíé'; cls = 'win'; winAmount = currentBet * 4; confetti(); }
        else if (normalized < 300) { msg = 'Ring üíç'; cls = 'win'; winAmount = currentBet * 2; }
        else { msg = 'Teddy üß∏'; winAmount = currentBet * 1.5; }

        stars += Math.floor(winAmount);
        document.getElementById('result').innerHTML = `<span class="${cls}">${msg} +${Math.floor(winAmount)} ‚òÖ</span>`;
        document.getElementById('spin-sound').pause();
        if (cls === 'win') document.getElementById('win-sound').play();

        updateBalance();
      }, 5200); // –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
    }

    function confetti() {
      confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 }
      });
    }
  </script>
</body>
</html>
